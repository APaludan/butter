<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            background-color: #f5f5f5;
            margin: 0;
            font-family: monospace;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
        }
    </style>
</head>

<body>

    <canvas id="canvas" width="960" height="100"></canvas>

    <div>
        <div>
            <label>Primary</label>
            <input type="range" id="intensity-slider" min="0" max="10" step="1" value="3">
            <p id="intensity-value">3</p>
        </div>
        <div>
            <label>Secondary</label>
            <input type="range" id="detail-slider" min="0" max="2" step="0.1" value="0.5">
            <p id="detail-value">0.5</p>
        </div>
    </div>

    <script>
        const intSlider = document.getElementById('intensity-slider');
        const detSlider = document.getElementById('detail-slider');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = "dodgerblue";
        ctx.imageSmoothingEnabled = false;

        let cols = 100;
        let rows = 50;
        const baseline = rows / 2;

        let primary_amp = 3;
        let secondary_amp = 0.5;
        let speed = 3;
        let time = 0;

        intSlider.oninput = (e) => {
            primary_amp = parseFloat(e.target.value);
            document.getElementById("intensity-value").innerText = primary_amp;
        }
        detSlider.oninput = (e) => {
            secondary_amp = parseFloat(e.target.value);
            document.getElementById("detail-value").innerText = secondary_amp;
        }


        const charWidth = canvas.width / cols;
        const charHeight = canvas.height / rows;
        const scale = 3;

        let lastTime = 0;
        function animate(currentTime) {
            const deltaTime = (currentTime - lastTime) / 1000;
            lastTime = currentTime;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            for (let x = 0; x < cols; x++) {
                const primary = Math.sin(scale * x * 0.08 + Math.cos(time * 0.5 + x * 0.02)) * primary_amp;
                const secondary = Math.sin(scale * 0.2 * x * (0.2 + Math.sin(time * 0.2) * 0.1) - time) * (primary_amp * 0.4 * secondary_amp) * primary_amp * 0.3;
                const tertiary = Math.cos(scale * 0.2 * x * 0.8 + time * 2) * (secondary_amp * 1.5) * primary_amp * 0.3;

                const y = Math.round(baseline + primary + secondary + tertiary);

                ctx.fillRect(x * charWidth, y * charHeight, 2, 2);
            }

            if (!isNaN(deltaTime)) {
                time += speed * deltaTime;
            }
            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>

</html>